# tcp3次握手，4次挥手（全双工）  
>tcp是一个面向连接的、可靠的传输控制协议。不知道多播和广播。是通过不断的发包重试来保证数据的可靠传递。udp协议是用户数据包协议，是无连接的协议，支持广播和多播，尽最大努力传输的不可靠协议。
tcp提供端到端的通信，ip提供点到点主机到主机的通信。属于传输层协议。
     
## 1、3次握手：
        客户端与服务器端建立连接一共需要发送3个包。
        第一次握手：客户端发送sync包到服务端，此时客户端状态为SYNC_SEND
        第二次握手：服务端接收到客户端发送的消息，响应一个ack应答，此时服务端状态为SYNC_REV，即半链接状态
        第三次握手：客户端收到服务器的应答，再次发送一个ack确认包到服务器端，发送完毕之后，客户端进入ESTABLISHED状态，服务端接收到这个确认包之后，也进入ESTABLISHED状态，TCP 握手结束。
        
       
## 2、4次挥手：
        第一次挥手（FIN=1，seq=x）：客户端发送FIN包到服务器端，表明自己无数据发送，但可以接收数据；发送完毕之后进入FIN_WAIT_1状态。
        第二次挥手（ACK=1，ACKnum=x+1）：服务端接收到FIN包，发送一个ack确认包，表明自己已经接收到关闭连接的请求，但还没有准备好关闭连接，此时服务器状态为CLOSE_WAIT，客户端接收到确认包，状态为FIN_WAIT_2状态
        第三次挥手（FIN=1，seq=y）：服务器准备好关闭连接，向客户端发送关闭连接请求，发送完毕后等待客户端最后一个响应，进入LAST_ACK状态
        第四次挥手（ACK=1，ACKnum=y+1）：客户端接收到服务器发来的关闭连接请求，发送一个ack确认包到服务器端，并进入TIME_WAIT状态，等待可能出现的要求重传的 ACK 包。服务器接收到该确认包之后，关闭连接，进入CLOSED状态。客户端等待一定时间之后，如果没有到服务器端的ack，那么就会认为连接已经关闭，此时客户端也进入CLOSED状态。
  
## 3、为什么会有3次握手4次挥手？

      全双工通信